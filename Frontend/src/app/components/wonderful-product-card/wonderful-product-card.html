<div class="wonderful-product-card" [class.grid-view]="viewMode === 'grid'" [class.list-view]="viewMode === 'list'">
  <!-- Product Image -->
  <div class="wonderful-product-image-container">
    <div class="wonderful-product-image">
      <img [src]="getProductImage()" [alt]="getProductTitle()" (click)="viewProductDetails()" *ngIf="getProductImage(); else noImage">
    </div>
    
    <!-- Product Badges -->
    <div class="wonderful-product-badges" *ngIf="hasDiscount() || !isInStock()">
      <span class="wonderful-badge discount" *ngIf="hasDiscount()">-{{ getDiscountPercent() }}%</span>
      <span class="wonderful-badge out-of-stock" *ngIf="!isInStock()">Out of Stock</span>
    </div>
    
    <!-- Hover Actions -->
    <div class="wonderful-product-hover-actions">
      <button class="wonderful-action-btn" (click)="onAddToWishlist()" title="Add to Wishlist">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
      </button>
      <button class="wonderful-action-btn" (click)="onAddToCompare()" title="Compare">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="9" y1="9" x2="15" y2="15"></line>
          <line x1="15" y1="9" x2="9" y2="15"></line>
        </svg>
      </button>
      <button class="wonderful-action-btn quick-view" (click)="openQuickView()" title="Quick View">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
          <circle cx="12" cy="12" r="3"></circle>
        </svg>
      </button>
    </div>
  </div>
  
  <!-- Product Content -->
  <div class="wonderful-product-content">
    <!-- Product Rating -->
    <div class="wonderful-product-rating" *ngIf="getProductRating() > 0">
      <div class="wonderful-stars">
        <span class="wonderful-star" *ngFor="let star of getStarArray(getProductRating()); let i = index" [class.filled]="star === 1">★</span>
      </div>
      <span class="wonderful-rating-value">{{ getProductRating() }}</span>
    </div>
    
    <!-- Product Title -->
    <h3 class="wonderful-product-title" (click)="viewProductDetails()">{{ getProductTitle() }}</h3>
    
    <!-- Product Price -->
    <div class="wonderful-product-price">
      <span class="wonderful-current-price">${{ getProductPrice() | number:'1.2-2' }}</span>
      <span class="wonderful-original-price" *ngIf="hasDiscount()">${{ getOriginalPrice() | number:'1.2-2' }}</span>
    </div>
    
    <!-- Action Buttons -->
    <div class="wonderful-product-actions">
      <button class="wonderful-add-to-cart" (click)="onAddToCart()" [disabled]="!isInStock()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        Add to Cart
      </button>
      <button class="wonderful-buy-now" (click)="onBuyNow()" [disabled]="!isInStock()">Buy Now</button>
    </div>
  </div>
</div>

<!-- No Image Placeholder -->
<ng-template #noImage>
  <div class="no-image-placeholder">
    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
      <circle cx="8.5" cy="8.5" r="1.5"></circle>
      <polyline points="21 15 16 10 5 21"></polyline>
    </svg>
  </div>
</ng-template>

<!-- Wonderful Quick View Modal -->
<div class="wonderful-quick-view-modal" [class.active]="showQuickView" (click)="closeQuickView()">
  <div class="wonderful-quick-view-backdrop"></div>
  <div class="wonderful-quick-view-content" (click)="$event.stopPropagation()">
    <button class="wonderful-quick-view-close" (click)="closeQuickView()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
    
    <div class="wonderful-quick-view-layout">
      <div class="wonderful-quick-view-image">
        <img [src]="getProductImage()" 
             [alt]="getProductTitle()" *ngIf="getProductImage(); else noImageModal">
      </div>
      
      <div class="wonderful-quick-view-details">
        <div class="wonderful-quick-view-category" *ngIf="getProductCategory()">{{ getProductCategory() }}</div>
        <h3 class="wonderful-quick-view-title">{{ getProductTitle() }}</h3>
        
        <div class="wonderful-quick-view-rating" *ngIf="getProductRating() || getProductRating() === 0">
          <div class="stars">
            <span class="star" 
                  *ngFor="let star of getStarArray(getProductRating()); let i = index" 
                  [class.filled]="star === 1">
              {{ star === 1 ? '★' : '☆' }}
            </span>
          </div>
          <span class="rating-value">{{ getProductRating() }}</span>
          <span class="review-count" *ngIf="getReviewCount() && getReviewCount() > 0">({{ getReviewCount() }} reviews)</span>
        </div>
        
        <p class="wonderful-quick-view-description" *ngIf="getProductDescription()">
          {{ getProductDescription() }}
        </p>
        
        <div class="wonderful-quick-view-price">
          <span class="current-price">{{ getProductPrice() | currency:'USD':'symbol':'1.2-2' }}</span>
          <span class="original-price" *ngIf="getOriginalPrice() > getProductPrice()">
            {{ getOriginalPrice() | currency:'USD':'symbol':'1.2-2' }}
          </span>
        </div>
        
        <!-- Product Options -->
        <div class="wonderful-quick-view-options">
          <div class="option-group">
            <label class="option-label">Color:</label>
            <div class="color-options">
              <button class="color-option active" style="background-color: #3b82f6;"></button>
              <button class="color-option" style="background-color: #ef4444;"></button>
              <button class="color-option" style="background-color: #10b981;"></button>
              <button class="color-option" style="background-color: #f59e0b;"></button>
            </div>
          </div>
          
          <div class="option-group">
            <label class="option-label">Size:</label>
            <div class="size-options">
              <button class="size-option">S</button>
              <button class="size-option active">M</button>
              <button class="size-option">L</button>
              <button class="size-option">XL</button>
            </div>
          </div>
        </div>
        
        <div class="wonderful-quick-view-actions">
          <div class="quantity-selector">
            <button class="qty-btn" (click)="decreaseQuantity()">-</button>
            <input type="number" class="qty-input" [(ngModel)]="quantity" min="1" max="10">
            <button class="qty-btn" (click)="increaseQuantity()">+</button>
          </div>
          
          <button class="btn btn-primary" (click)="onAddToCart(); closeQuickView()" [disabled]="isOutOfStock()">
            {{ isOutOfStock() ? 'Out of Stock' : 'Add to Cart' }}
          </button>
          <button class="btn btn-secondary" (click)="onBuyNow(); closeQuickView()" [disabled]="isOutOfStock()">
            Buy Now
          </button>
          <button class="btn btn-outline" (click)="onAddToWishlist()">
            Add to Wishlist
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- No Image Placeholder for Modal -->
<ng-template #noImageModal>
  <div class="no-image-placeholder-modal">
    <svg width="128" height="128" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
      <circle cx="8.5" cy="8.5" r="1.5"></circle>
      <polyline points="21 15 16 10 5 21"></polyline>
    </svg>
  </div>
</ng-template>