<div class="product-form">
  <header class="form-header">
    <h1>{{ isEditMode ? 'Edit Product' : 'Create New Product' }}</h1>
  </header>

  <div class="loading" *ngIf="loading">
    <svg class="spinner" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 12a9 9 0 1 1-6.219-8.56"></path>
    </svg>
    {{ isEditMode ? 'Loading product...' : 'Creating product...' }}
  </div>
  <div class="error" *ngIf="error">{{ error }}</div>

  <form class="form-container" *ngIf="!loading" (ngSubmit)="onSubmit()">
    <div class="form-grid">
      <div class="form-group">
        <label for="name">Product Name</label>
        <input 
          type="text" 
          id="name" 
          [(ngModel)]="product['title']" 
          name="title"
          placeholder="Enter product name"
          required
          class="form-control"
        >
      </div>

      <div class="form-group">
        <label for="price">Price ($)</label>
        <input 
          type="number" 
          id="price" 
          [(ngModel)]="product['price']" 
          name="price"
          placeholder="Enter price"
          min="0"
          step="0.01"
          required
          class="form-control"
        >
      </div>

      <div class="form-group">
        <label for="stock">Stock Quantity</label>
        <input 
          type="number" 
          id="stock" 
          [(ngModel)]="product.stock" 
          name="stock"
          placeholder="Enter stock quantity"
          min="0"
          class="form-control"
        >
      </div>

      <div class="form-group">
        <label for="category">Category</label>
        <select 
          id="category" 
          [(ngModel)]="product.categorieId" 
          name="categorieId"
          class="form-control"
        >
          <option value="">Select a category</option>
          <option *ngFor="let category of categories" [value]="category.id">
            {{ category.nom }}
          </option>
        </select>
      </div>

      <div class="form-group full-width">
        <label for="description">Description</label>
        <textarea 
          id="description" 
          [(ngModel)]="product.description" 
          name="description"
          placeholder="Enter product description"
          rows="4"
          class="form-control"
        ></textarea>
      </div>

      <div class="form-group full-width">
        <label for="image">Image URL</label>
        <input 
          type="text" 
          id="image" 
          [(ngModel)]="product['imageUrl']" 
          name="imageUrl"
          placeholder="Enter image URL"
          class="form-control"
        >
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="onCancel()">
        Cancel
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="loading">
        {{ isEditMode ? 'Update Product' : 'Create Product' }}
      </button>
    </div>
  </form>
</div>