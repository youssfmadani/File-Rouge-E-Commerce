<div class="order-form">
  <header class="form-header">
    <h1>{{ isEditMode ? 'Edit Order' : 'Create New Order' }}</h1>
    <button class="btn btn-secondary" (click)="onCancel()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
      Cancel
    </button>
  </header>

  <div class="loading" *ngIf="loading">
    <svg class="spinner" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 12a9 9 0 1 1-6.219-8.56"></path>
    </svg>
    {{ isEditMode ? 'Loading order...' : 'Preparing form...' }}
  </div>
  
  <div class="error" *ngIf="error && !loading">
    <div class="error-content">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
      </svg>
      <div>
        <h3>Error</h3>
        <p>{{ error }}</p>
        <button class="btn btn-primary" (click)="onCancel()" *ngIf="error.includes('Order not found')">
          Return to Orders List
        </button>
      </div>
    </div>
  </div>

  <form *ngIf="!loading && !error" (ngSubmit)="onSubmit()" #orderForm="ngForm">
    <div class="form-group">
      <label for="dateCommande">Order Date</label>
      <input 
        type="date" 
        id="dateCommande" 
        name="dateCommande" 
        [(ngModel)]="order.dateCommande" 
        (change)="onDateChange($event)"
        class="form-control"
        required
      >
    </div>

    <div class="form-group">
      <label for="statut">Status</label>
      <select 
        id="statut" 
        name="statut" 
        [(ngModel)]="order.statut" 
        class="form-control"
        required
      >
        <option *ngFor="let status of statusOptions" [value]="status.value">
          {{ status.label }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="adherentId">Customer ID</label>
      <input 
        type="number" 
        id="adherentId" 
        name="adherentId" 
        [(ngModel)]="order.adherentId" 
        class="form-control"
        required
      >
    </div>

    <div class="form-group">
      <label for="montantTotal">Total Amount</label>
      <input 
        type="number" 
        id="montantTotal" 
        name="montantTotal" 
        [(ngModel)]="order.montantTotal" 
        class="form-control"
        step="0.01"
        min="0"
        required
      >
    </div>

    <div class="form-group">
      <label for="produitIds">Product IDs (comma separated)</label>
      <input 
        type="text" 
        id="produitIds" 
        name="produitIds" 
        [(ngModel)]="order.produitIds" 
        class="form-control"
        placeholder="e.g., 1, 2, 3"
      >
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="orderForm.invalid">
        {{ isEditMode ? 'Update Order' : 'Create Order' }}
      </button>
    </div>
  </form>
  
  <div class="success-message" *ngIf="successMessage">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polyline points="20,6 9,17 4,12"></polyline>
    </svg>
    {{ successMessage }}
  </div>
</div>